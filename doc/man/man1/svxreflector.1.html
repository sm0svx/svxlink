<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sun May  4 14:24:09 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SVXREFLECTOR</title>

</head>
<body>

<h1 align="center">SVXREFLECTOR</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#HANDLING X.509 CERTIFICATES">HANDLING X.509 CERTIFICATES</a><br>
<a href="#FILES">FILES</a><br>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#REPORTING BUGS">REPORTING BUGS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">svxreflector
&minus; The SvxLink conference server audio reflector</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em"><b>svxreflector
[--help] [--version] [--daemon] [--logfile=</b><i>log
file</i><b>] [--config=</b><i>configuration file</i><b>]
[--pidfile=</b><i>pid file</i><b>] [--runasuser=</b><i>user
name</i><b>]</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The
<b>SvxReflector</b> server is used to interconnect multiple
SvxLink nodes into one network. Traffic is switched using
talk groups in the SvxReflector server so that all audio
sent to the reflector from one node is retransmitted on all
other nodes that have selected the same talk group. Only one
talker is allowed at a time on each talk group so if another
node starts sending audio when another one is already
active, the second node will not interrupt the first
talker.</p>

<p style="margin-left:9%; margin-top: 1em">A TCP/IP
connection is used for the control messages and the audio is
transported via UDP. Make sure to open up the configured TCP
and UDP ports in your firewall for incoming traffic on the
server. By default the port number is set to 5300 for both
TCP and UDP. The clients do not have to open any ports in
their firewall. Each node must have a unique user ID,
typically the callsign. It is not allowed for a client,
using the same user ID, to connect more than one time to the
server. The connections are protected by using X.509
certificates. See <b>HANDLING X.509 CERTIFICATES</b> below
for more info.</p>

<p style="margin-left:9%; margin-top: 1em">On the SvxLink
node side, a ReflectorLogic is used to connect to the
SvxReflector server. The connection to the SvxReflector from
other logics in that node can be activated and deactivated
using standard logic linking. Read more about how to set up
a SvxLink node for use with the SvxReflector in the
<b>svxlink.conf</b>(5) manual page.</p>

<p style="margin-left:9%; margin-top: 1em">The SvxReflector
offer a QSY functionality which is used to switch all active
nodes to another talk group. This can be used to make a call
on a broad talk group, like a large region or the entire
country, and when the called party answers a QSY can be
performed to a talk group where only the active nodes are
included. The reflector may also be configured to initiate
an automatic QSY after a specified duration on certain talk
groups.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="8%">


<p style="margin-top: 1em"><b>--help</b></p></td>
<td width="1%"></td>
<td width="38%">


<p style="margin-top: 1em">Print a help message and
exit.</p> </td>
<td width="44%">
</td></tr>
</table>

<p style="margin-left:9%;"><b>--daemon</b></p>

<p style="margin-left:18%;">Start the SvxReflector server
as a daemon.</p>

<p style="margin-left:9%;"><b>--runasuser</b></p>

<p style="margin-left:18%;">Start SvxReflector as the
specified user. The switch to the new user will happen after
the log and pid files has been opened.</p>

<p style="margin-left:9%;"><b>--logfile=</b><i>log
file</i></p>

<p style="margin-left:18%;">Specify a log file to put all
output into. Both stdout and stderr will be redirected to
the log file.</p>

<p style="margin-left:9%;"><b>--pidfile=</b><i>pid
file</i></p>

<p style="margin-left:18%;">Specify a pid file to write the
process ID into.</p>


<p style="margin-left:9%;"><b>--config=</b><i>configuration
file</i></p>

<p style="margin-left:18%;">Specify which configuration
file to use.</p>

<p style="margin-left:9%;"><b>--version</b></p>

<p style="margin-left:18%;">Print the version of the
application.</p>

<h2>HANDLING X.509 CERTIFICATES
<a name="HANDLING X.509 CERTIFICATES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">X.509
certificates and TLS, the same technologies used to secure
internet connections in general, are used to authenticate
nodes connecting to the reflector server. It&rsquo;s a
complex technology but as much as possible has been done to
hide that complexity in SvxReflector to make operating the
reflector system easy.</p>

<p style="margin-left:9%; margin-top: 1em">A node owner
does not have to understand the certificate technology at
all really but a reflector sysop need to understand the
basics to be able to operate the reflector and to be able to
resolve authentication problems.</p>

<p style="margin-left:9%; margin-top: 1em">The first thing
to understand is that public-key cryptography is used. You
will see the term PKI in SvxLink which is short for Public
Key Infrastructure. To use public-key cryptography a key
pair is needed, a secret private key and a non-secret public
key. In SvxLink the key pair is stored in a file with the
extension &quot;.key&quot;. Those files must be kept secret
since anyone that have access to the secret key can act as
the rightful owner.</p>

<p style="margin-left:9%; margin-top: 1em">A certificate is
nothing but a small amount of information secured using
public-key cryptography. That make it possible to verify
that the information in the certificate is valid. An X.509
certificate always have a start date and an end date. The
certificate will only verify as valid when the current time
is within those two dates. When a certificate has less than
1/3 of its lifetime left the reflector server will renew the
certificate automatically. Other than that the most
important information in the certificate is the node
callsign. An email address is also good to have in the
certificate but only the callsign is required. The callsign
is stored in a certificate field called subject Common Name
(CN). Certificates in SvxLink are stored in files with the
extension &quot;.crt&quot;.</p>

<p style="margin-left:9%; margin-top: 1em">A certificate is
created by signing a Certificate Signing Request (CSR). The
CSR is automatically generated by a node and sent to the
reflector when needed. If configured (see CERT_CA_HOOK), the
reflector sysop will be notified when a new CSR is received.
The reflector sysop should then verify that the CSR contains
the correct information and that the requesting node has the
right to use the given callsign. The latter task is the hard
part and that procedure needs to be figured out by the
reflector sysop. In SvxLink a CSR is stored in a file with
the extension &quot;.csr&quot;.</p>

<p style="margin-left:9%; margin-top: 1em">The last piece
of information that is important to know about X.509
certificates is that a chain of certificates are used to
form the secure infrastructure. In SvxLink there is a root
certificate and a signing certificate. The root certificate
is used to sign the signing certificate. The signing
certificate is used to sign all other certificates, both for
the nodes and the server certificate used by the reflector
itself.</p>

<p style="margin-left:9%; margin-top: 1em">In SvxLink, both
on the node side and the server side, PKI files are by
default stored in the directory /var/lib/svxlink/pki. Nodes
store all their PKI files flat in that directory. On the
reflector server there are a subdirectory for each type of
file: private (for keys), csrs and certs. There also is a
pending_csrs subdirectory for incoming CSRs that have not
been signed yet. When a CSR has been signed it will be moved
to the csrs subdirectory.</p>

<p style="margin-left:9%; margin-top: 1em">Signing a CSR on
the reflector server is done through a COMMAND_PTY
command:</p>

<p style="margin-left:9%; margin-top: 1em">echo CA SIGN
callsign &gt; /dev/shm/reflector_ctrl</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><i>/etc/svxlink/svxreflector.conf</i></p>

<p style="margin-left:18%;">The system wide configuration
file. See <b>svxreflector.conf</b>(5) for further
details.</p>


<p style="margin-left:9%;"><i>&#732;/.svxlink/svxreflector.conf</i></p>

<p style="margin-left:18%;">Per user configuration file.
See <b>svxreflector.conf</b>(5) for further details.</p>


<p style="margin-left:9%;"><i>/etc/svxlink/svxreflector.d/*</i></p>

<p style="margin-left:18%;">Additional configuration files.
This directory is setup by the CFG_DIR configuration
variable.</p>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="5%">


<p style="margin-top: 1em">HOME</p></td>
<td width="4%"></td>
<td width="58%">


<p style="margin-top: 1em">Used to find the per user
configuration file.</p></td>
<td width="24%">
</td></tr>
</table>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Tobias Blomberg
(SM0SVX) &lt;sm0svx at svxlink dot org&gt;</p>

<h2>REPORTING BUGS
<a name="REPORTING BUGS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Bugs should be
reported using the issue tracker at
https://github.com/sm0svx/svxlink.</p>

<p style="margin-left:9%; margin-top: 1em">Questions about
SvxLink should not be asked using the issue tracker. Instead
use the group set up for this purpose at groups.io:
https://groups.io/g/svxlink</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><b>svxreflector.conf</b>(5),
<b>svxlink</b>(1), <b>svxlink.conf</b>(5),</p>
<hr>
</body>
</html>
